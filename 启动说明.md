# 启动说明

## 快速启动（开发环境）

### 第一步：安装依赖

```bash
npm install
```

### 第二步：启动PostgreSQL数据库

确保PostgreSQL服务正在运行，并创建数据库：

```bash
# macOS (使用Homebrew)
brew services start postgresql

# 创建数据库
createdb voice_badcase
```

### 第三步：配置数据库连接

编辑 `server/index.js`，修改数据库连接信息：

```javascript
const pool = new Pool({
  user: 'postgres',        // 你的用户名
  host: 'localhost',
  database: 'voice_badcase',
  password: 'your_password', // 你的密码
  port: 5432,
})
```

### 第四步：启动后端服务

```bash
npm run server
```

看到以下信息表示启动成功：
```
数据库表初始化成功
服务器运行在 http://localhost:3000
```

### 第五步：启动前端服务

打开新的终端窗口：

```bash
npm run dev
```

看到以下信息：
```
VITE ready in xxx ms
➜ Local: http://localhost:5173/
```

### 第六步：访问应用

在浏览器打开：http://localhost:5173

### （可选）第七步：插入测试数据

如果数据库是空的，可以插入一些测试数据：

```bash
node server/mock-data.js
```

## 常见问题

### 1. 端口被占用

如果3000或5173端口被占用，可以修改端口：

**后端端口**：编辑 `server/index.js` 中的 `port` 变量

**前端端口**：编辑 `vite.config.ts` 中的 `server.port` 配置

### 2. 数据库连接失败

确认：
- PostgreSQL服务是否启动
- 数据库名称、用户名、密码是否正确
- 防火墙是否允许5432端口

### 3. npm install 失败

尝试：
```bash
# 清除缓存
npm cache clean --force

# 重新安装
npm install
```

或使用国内镜像：
```bash
npm install --registry=https://registry.npmmirror.com
```

## 停止服务

- 前端：在终端按 `Ctrl + C`
- 后端：在终端按 `Ctrl + C`

## 生产部署

参考 `README.md` 中的"生产部署"章节


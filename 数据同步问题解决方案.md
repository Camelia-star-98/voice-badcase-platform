# ðŸŽ¯ é—®é¢˜è§£å†³æ–¹æ¡ˆæ€»ç»“

## é—®é¢˜
åœ¨ç”Ÿäº§çŽ¯å¢ƒ https://voice-badcase-platform.vercel.app/status-flow åˆ é™¤æ•°æ®åŽï¼Œæ¢ç”µè„‘è®¿é—®æ•°æ®è¿˜åœ¨ã€‚

## åŽŸå› 
åº”ç”¨ä½¿ç”¨çš„æ˜¯ **æµè§ˆå™¨ localStorage**ï¼Œä¸æ˜¯äº‘ç«¯æ•°æ®åº“ã€‚æ¯å°ç”µè„‘çš„æ•°æ®ç‹¬ç«‹ï¼Œæ— æ³•åŒæ­¥ã€‚

## è§£å†³æ–¹æ¡ˆ
å°†æ•°æ®å­˜å‚¨ä»Ž localStorage è¿ç§»åˆ° **Supabase äº‘æ•°æ®åº“**ã€‚

---

## âš¡ å¿«é€Ÿéƒ¨ç½²ï¼ˆ3 æ­¥ï¼‰

### æ­¥éª¤ 1: æ‰§è¡Œæ•°æ®åº“è¿ç§»

1. ç™»å½• https://supabase.com/dashboard
2. é€‰æ‹©é¡¹ç›® `bpivzznuvvbafsyvzxqm`
3. æ‰“å¼€ **SQL Editor** â†’ **New query**
4. å¤åˆ¶ `database/migrate_badcases_table.sql` å†…å®¹å¹¶æ‰§è¡Œ

### æ­¥éª¤ 2: é…ç½® Vercel çŽ¯å¢ƒå˜é‡

è®¿é—® https://vercel.com/dashboardï¼Œæ‰¾åˆ°é¡¹ç›® â†’ Settings â†’ Environment Variables

æ·»åŠ ä¸¤ä¸ªå˜é‡ï¼š

```
Name: VITE_SUPABASE_URL
Value: https://bpivzznuvvbafsyvzxqm.supabase.co
Environments: Production, Preview, Development
```

```
Name: VITE_SUPABASE_ANON_KEY
Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwaXZ6em51dnZiYWZzeXZ6eHFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM0MDg1NjIsImV4cCI6MjA0ODk4NDU2Mn0.cXDE2rwda9N9o_eBSZeW10_YuVNCN6BCHc0kcNCuTRw
Environments: Production, Preview, Development
```

### æ­¥éª¤ 3: é‡æ–°éƒ¨ç½²

**æ–¹æ³• A: Git è‡ªåŠ¨éƒ¨ç½²**
```bash
git add .
git commit -m "feat: ä½¿ç”¨ Supabase å®žçŽ°å¤šè®¾å¤‡æ•°æ®åŒæ­¥"
git push origin main
```

**æ–¹æ³• B: ä½¿ç”¨è„šæœ¬**
```bash
cd /Users/ailian/Downloads/voice-badcase-platform
./deploy-supabase.sh
```

**æ–¹æ³• C: æ‰‹åŠ¨éƒ¨ç½²**
```bash
cd /Users/ailian/Downloads/voice-badcase-platform
vercel --prod
```

---

## âœ… éªŒè¯

1. æ‰“å¼€ https://voice-badcase-platform.vercel.app
2. æŒ‰ F12 æ‰“å¼€æŽ§åˆ¶å°
3. åº”è¯¥çœ‹åˆ°ï¼š
   ```
   âœ… Supabase å®¢æˆ·ç«¯å·²åˆå§‹åŒ–
   ðŸŒ ä½¿ç”¨ Supabase æ•°æ®åº“
   ```
4. æµ‹è¯•åˆ é™¤åŠŸèƒ½
5. åœ¨å¦ä¸€å°ç”µè„‘åˆ·æ–° â†’ æ•°æ®åŒæ­¥æ¶ˆå¤± âœ…

---

## ðŸ”§ æœ¬åœ°æµ‹è¯•

**æµ‹è¯•è¿žæŽ¥:**
```bash
open test-supabase-connection.html
```

**æœ¬åœ°å¼€å‘ä½¿ç”¨ Supabase:**
```bash
# åˆ›å»º .env.local
cat > .env.local << 'EOF'
VITE_SUPABASE_URL=https://bpivzznuvvbafsyvzxqm.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwaXZ6em51dnZiYWZzeXZ6eHFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM0MDg1NjIsImV4cCI6MjA0ODk4NDU2Mn0.cXDE2rwda9N9o_eBSZeW10_YuVNCN6BCHc0kcNCuTRw
EOF

# é‡å¯å¼€å‘æœåŠ¡å™¨
npm run dev
```

---

## ðŸ“ ä¿®æ”¹çš„æ–‡ä»¶

### æ–°å¢žæ–‡ä»¶
- `src/api/badcaseApi.ts` - Supabase API å°è£…
- `database/migrate_badcases_table.sql` - æ•°æ®åº“è¿ç§»è„šæœ¬
- `test-supabase-connection.html` - è¿žæŽ¥æµ‹è¯•å·¥å…·
- `deploy-supabase.sh` - å¿«é€Ÿéƒ¨ç½²è„šæœ¬
- `SUPABASE_SYNC_FIX.md` - è¯¦ç»†æ–‡æ¡£

### ä¿®æ”¹æ–‡ä»¶
- `src/contexts/BadcaseContext.tsx` - æ”¯æŒ Supabase + localStorage åŒæ¨¡å¼
- `src/api/mockData.ts` - æ¸…ç©º Mock æ•°æ®ï¼ˆå·²åœ¨ä¹‹å‰å®Œæˆï¼‰

---

## ðŸŒŸ æ–°ç‰¹æ€§

âœ… **è‡ªåŠ¨é™çº§**
- Supabase å¯ç”¨ â†’ ä½¿ç”¨äº‘æ•°æ®åº“
- Supabase ä¸å¯ç”¨ â†’ è‡ªåŠ¨é™çº§åˆ° localStorage

âœ… **å¤šè®¾å¤‡åŒæ­¥**
- æ‰€æœ‰æ“ä½œå®žæ—¶åŒæ­¥
- ä¸åŒç”µè„‘ã€ä¸åŒæµè§ˆå™¨æ•°æ®ä¸€è‡´

âœ… **å‘åŽå…¼å®¹**
- æœ¬åœ°å¼€å‘ä»å¯ä½¿ç”¨ localStorage
- ä¸å½±å“çŽ°æœ‰åŠŸèƒ½

---

## ðŸ†˜ æ•…éšœæŽ’æŸ¥

**é—®é¢˜**: æŽ§åˆ¶å°æ˜¾ç¤º "Supabase è¿žæŽ¥å¤±è´¥"
- æ£€æŸ¥ Vercel çŽ¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®
- é‡æ–°éƒ¨ç½²åº”ç”¨
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

**é—®é¢˜**: æ•°æ®ä»ä¸åŒæ­¥
- å¼ºåˆ¶åˆ·æ–°: Ctrl+Shift+R (Windows) / Cmd+Shift+R (Mac)
- ä½¿ç”¨éšç§æ¨¡å¼æµ‹è¯•
- æ£€æŸ¥æŽ§åˆ¶å°æ˜¯å¦ä½¿ç”¨ Supabase

**é—®é¢˜**: åˆ é™¤æ“ä½œæŠ¥é”™
- æ£€æŸ¥ Supabase æ•°æ®åº“è¡¨æ˜¯å¦å­˜åœ¨
- éªŒè¯ RLS ç­–ç•¥æ˜¯å¦æ­£ç¡®é…ç½®

---

## ðŸ“ž å®Œæ•´æ–‡æ¡£

è¯¦ç»†è¯´æ˜Žè¯·æŸ¥çœ‹: `SUPABASE_SYNC_FIX.md`

---

**åˆ›å»ºæ—¶é—´**: 2024-12-22
**çŠ¶æ€**: âœ… å·²å®Œæˆ

